<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mindmap Malware Informatica - Geen overlap</title>
  <style>
    :root{
      --bg:#f7fafc;
      --accent:#0b6cff;
      --muted:#94a3b8;
      --card:#ffffff;
      --text:#0f1724;
    }
    html,body{height:100%;margin:0;font-family:Inter, Arial, Helvetica, sans-serif;background:var(--bg);color:var(--text)}
    header{display:flex;align-items:center;justify-content:space-between;padding:16px 24px}
    h1{margin:0;font-size:18px;color:var(--accent)}
    #printBtn{padding:8px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    #canvas{width:100%;height:calc(100% - 64px);overflow:auto;display:flex;justify-content:center;align-items:flex-start;padding-bottom:24px}
    svg{background:transparent}
    .link{fill:none;stroke:var(--muted);stroke-width:2;marker-end:url(#arrow);stroke-linecap:round}
    .node rect{fill:var(--card);stroke:var(--accent);stroke-width:1.6;rx:10;ry:10}
    .node .text{font-size:13px;fill:var(--text);font-family:Inter,Arial;text-anchor:start}
    @media print{#printBtn,header{display:none}}
  </style>
</head>
<body>
  <header>
    <h1>Mindmap — Malware Informatica (geen overlap)</h1>
    <button id="printBtn" onclick="window.print()">Print</button>
  </header>
  <div id="canvas"><svg id="svgRoot" xmlns="http://www.w3.org/2000/svg"></svg></div>

  <script>
    const content = [
      { title: "Wat is malware?", items:[
        "Kwaadaardige software (Malicious software).",
        "Bevat o.a. virussen, wormen, trojaanse paarden, spyware, adware, ransomware."
      ]},
      { title: "Symptomen", items:[
        "Traag systeem of internet.",
        "Bestanden verdwenen of vergrendeld.",
        "Gestolen persoonlijke gegevens (logins, e-mail).",
        "Pop-ups, toolbars, veel reclame.",
        "Homepage of zoekbalk verandert."
      ]},
      { title: "Oorzaken", items:[
        "Onvoorzichtig downloaden / verdachte links.",
        "Illegale downloads, cracks, torrents.",
        "Besmette USB / opslagmedia.",
        "Onveilige of verouderde software (niet geüpdatet).",
        "Openbare of onbeveiligde netwerken.",
        "Gratis apps met verborgen adware/spyware."
      ]},
      { title: "Soorten malware", items:[
        "Virus — nestelt zich in bestanden.",
        "Worm — vermenigvuldigt zich, verspreidt via netwerk.",
        "Trojaans paard — verborgen functie die toegang geeft.",
        "Spyware — verzamelt gegevens.",
        "Adware — opdringerige reclame/toolbars.",
        "Spam — ongewenste mail.",
        "Hoax — valse berichten / kettingbrieven.",
        "Scareware — valse waarschuwingen voor betaling.",
        "Ransomware — vergrendelt bestanden, vraagt losgeld.",
        "Cryptojacking — gebruikt rekenkracht voor mining."
      ]},
      { title: "Mobiele apparaten", items:[
        "Smartphones/tablets kunnen ook geïnfecteerd raken.",
        "Download alleen uit Play Store / App Store.",
        "Vermijd niet-officiële app-stores."
      ]},
      { title: "Bescherming", items:[
        "Installeer antivirus en activeer automatische updates.",
        "Gebruik firewall; houd OS & programma's up-to-date.",
        "Download alleen officiële bronnen; controleer installaties.",
        "Maak regelmatig back-ups; bewaar extern.",
        "Leer valse mails/berichten herkennen.",
        "Gebruik sterke wachtwoorden en 2FA.",
        "Beveilig thuisnetwerk; vermijd openbare wifi voor gevoelige taken.",
        "Wees kritisch: klik niet zomaar; vermijd illegale sites."
      ]},
      { title: "Als slachtoffer", items:[
        "Scan met virusscanner; veilige modus / herstelpunt proberen.",
        "Herstel of herinstallatie als laatste redmiddel (backup eerst).",
        "Wijzig direct wachtwoorden; waarschuw contacten.",
        "Contacteer bank / Cardstop bij betalingsgegevens.",
        "Doe aangifte bij politie bij financiële schade.",
        "Betaal nooit losgeld; schakel IT-expert in."
      ]}
    ];

    const svg = document.getElementById('svgRoot');
    while (svg.firstChild) svg.removeChild(svg.firstChild);
    const svgns = "http://www.w3.org/2000/svg";

    const markerDefs = document.createElementNS(svgns, 'defs');
    const marker = document.createElementNS(svgns, 'marker');
    marker.setAttribute('id','arrow');
    marker.setAttribute('markerWidth','9');
    marker.setAttribute('markerHeight','9');
    marker.setAttribute('refX','8');
    marker.setAttribute('refY','4.5');
    marker.setAttribute('orient','auto');
    marker.setAttribute('markerUnits','strokeWidth');
    const markerPath = document.createElementNS(svgns, 'path');
    markerPath.setAttribute('d','M0,0 L0,9 L9,4.5 z');
    markerPath.setAttribute('fill','#94a3b8');
    marker.appendChild(markerPath);
    markerDefs.appendChild(marker);
    svg.appendChild(markerDefs);

    const nodeW = 300;
    const nodeH = 60;
    const vGap = 14;
    const hGap = 60;
    const rootW = 180;
    const margin = {left:40,right:40,top:40,bottom:40};

    const columns = content.length;
    const columnXStart = margin.left + rootW + 120;
    const columnWidth = nodeW + hGap;
    const svgWidth = Math.max(1200, columnXStart + columns * columnWidth + margin.right);
    const columnHeights = [];

    for (let i=0;i<columns;i++){
      const items = content[i].items.length;
      const h = nodeH + 8 + items * nodeH + Math.max(0, items-1)*vGap;
      columnHeights.push(h);
    }

    const svgHeight = Math.max(700, Math.max(...columnHeights) + margin.top + margin.bottom + 40);
    svg.setAttribute('viewBox', `0 0 ${svgWidth} ${svgHeight}`);
    svg.setAttribute('width', svgWidth);
    svg.setAttribute('height', svgHeight);

    const rootX = margin.left;
    const rootY = svgHeight / 2 - nodeH/2;

    function makeNode(x,y,w,h,lines,isHeader){
      const g = document.createElementNS(svgns,'g');
      g.setAttribute('transform', `translate(${x},${y})`);
      const rect = document.createElementNS(svgns,'rect');
      rect.setAttribute('x',0);
      rect.setAttribute('y',0);
      rect.setAttribute('width',w);
      rect.setAttribute('height',h);
      rect.setAttribute('rx',10);
      rect.setAttribute('ry',10);
      g.appendChild(rect);
      const fo = document.createElementNS(svgns,'foreignObject');
      fo.setAttribute('x',12);
      fo.setAttribute('y',8);
      fo.setAttribute('width',w-24);
      fo.setAttribute('height',h-16);
      const div = document.createElement('div');
      div.setAttribute('xmlns','http://www.w3.org/1999/xhtml');
      div.style.font = isHeader ? "600 14px Inter, Arial" : "13px Inter, Arial";
      div.style.lineHeight = "1.15";
      div.style.color = "#0f1724";
      div.style.wordWrap = "break-word";
      div.style.textAlign = "left";
      div.style.height = (h-16) + "px";
      div.style.overflow = "hidden";
      div.innerHTML = lines.map(l=>`<div>${escapeHtml(l)}</div>`).join("");
      fo.appendChild(div);
      g.appendChild(fo);
      svg.appendChild(g);
      return {x,y,w,h,el:g};
    }

    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    const rootNode = makeNode(rootX, rootY, rootW, nodeH, ["Malware"], true);

    const columnPositions = [];
    const centerY = svgHeight/2;
    const spacingTopBaseline = 20;

    for (let i=0;i<columns;i++){
      const colX = columnXStart + i * columnWidth;
      const colHeight = columnHeights[i];
      const startY = Math.max(margin.top + spacingTopBaseline, centerY - colHeight/2);
      columnPositions.push({x:colX, startY});
    }

    const nodes = [rootNode];

    for (let i=0;i<columns;i++){
      const col = content[i];
      const pos = columnPositions[i];
      const headerY = pos.startY;
      const headerNode = makeNode(pos.x, headerY, nodeW, nodeH, [col.title], true);
      nodes.push(headerNode);
      const items = col.items;
      for (let j=0;j<items.length;j++){
        const y = headerY + nodeH + 8 + j * (nodeH + vGap);
        const lines = splitLines(items[j], 42, 3);
        const child = makeNode(pos.x, y, nodeW, nodeH, lines, false);
        nodes.push(child);
        appendElbowLink(rootNode.x + rootNode.w, rootNode.y + rootNode.h/2, headerNode.x, headerNode.y + headerNode.h/2);
        appendElbowLink(headerNode.x + headerNode.w, headerNode.y + headerNode.h/2, child.x, child.y + child.h/2);
      }
      if (items.length === 0) {
        appendElbowLink(rootNode.x + rootNode.w, rootNode.y + rootNode.h/2, headerNode.x, headerNode.y + headerNode.h/2);
      }
    }

    function appendElbowLink(sx, sy, tx, ty){
      const midX = sx + (tx - sx) * 0.45;
      const midX2 = sx + (tx - sx) * 0.65;
      const d = `M ${sx} ${sy} C ${midX} ${sy} ${midX2} ${ty} ${tx} ${ty}`;
      const p = document.createElementNS(svgns,'path');
      p.setAttribute('d', d);
      p.setAttribute('class','link');
      p.setAttribute('marker-end','url(#arrow)');
      svg.appendChild(p);
    }

    function splitLines(text, chars, maxLines){
      const words = text.split(/\s+/);
      const lines = [];
      let cur = "";
      for (let w of words){
        if ((cur + " " + w).trim().length <= chars) cur = (cur + " " + w).trim();
        else { lines.push(cur); cur = w; }
      }
      if (cur) lines.push(cur);
      if (lines.length <= maxLines) return lines;
      const res = lines.slice(0, maxLines);
      res[res.length-1] = res[res.length-1].slice(0, Math.max(10, chars-6)) + '…';
      return res;
    }

    window.addEventListener('resize', ()=>{});
  </script>
</body>
</html>
